// Generated by CoffeeScript 1.6.3
(function() {
  "use strict";
  var main;

  main = angular.module('RPS', []).config(function($routeProvider) {
    return $routeProvider.when('/play', {
      templateUrl: 'partials/play.html',
      controller: 'AskName'
    }).when('/choice', {
      templateUrl: 'partials/choice.html',
      controller: 'ChooseRPS'
    }).when('/end', {
      templateUrl: 'partials/end.html',
      controller: 'Final'
    }).when('/about', {
      templateUrl: 'partials/about.html',
      controller: 'about'
    }).otherwise({
      redirectTo: '/about'
    });
  });

  main.service('sharedData', function() {
    this.name = function() {
      return 'name';
    };
    return this.choice = function() {
      return 'choice';
    };
  });

  main.controller('AskName', function($scope, sharedData, $location) {
    $scope.message = 'Hello, what is your name?';
    $scope.name = 'Player';
    return $scope.submit = function() {
      sharedData.name = $scope.name;
      return $location.path('choice');
    };
  });

  main.controller('ChooseRPS', function($scope, sharedData, $location) {
    $scope.message = "OK " + sharedData.name + "! Choose Rock, Paper or Scissors!";
    $scope.images = {
      rock: {
        image: 'static/rock.svg',
        name: 'rock'
      },
      paper: {
        image: 'static/paper.svg',
        name: 'paper'
      },
      scissors: {
        image: 'static/scissors.svg',
        name: 'scissors'
      }
    };
    return $scope.select = function(choice) {
      sharedData.choice = choice;
      return $location.path('end');
    };
  });

  main.controller('Final', function($scope, sharedData, $location) {
    var rand, result, select;
    $scope.name = sharedData.name;
    $scope.choice = sharedData.choice;
    select = ['rock', 'paper', 'scissors'];
    rand = Math.floor(Math.random() * select.length);
    $scope.comp = select[rand];
    if (sharedData.choice === $scope.comp) {
      result = 'tied';
    }
    if (sharedData.choice === 'rock' && $scope.comp === 'paper') {
      result = 'lose';
    }
    if (sharedData.choice === 'rock' && $scope.comp === 'scissors') {
      result = 'win';
    }
    if (sharedData.choice === 'paper' && $scope.comp === 'rock') {
      result = 'win';
    }
    if (sharedData.choice === 'paper' && $scope.comp === 'scissors') {
      result = 'lose';
    }
    if (sharedData.choice === 'scissors' && $scope.comp === 'rock') {
      result = 'lose';
    }
    if (sharedData.choice === 'scissors' && $scope.comp === 'paper') {
      result = 'win';
    }
    $scope.message = sharedData.name + ', you ' + result + '!';
    return $scope.click = function() {
      return $location.path('choice');
    };
  });

  main.controller('about', function($scope, $location) {
    return $scope.click = function() {
      return $location.path('play');
    };
  });

}).call(this);
